import{u as e,m as r,a as t}from"../nitro/nitro.mjs";import*as n from"node:buffer";import{Buffer as i}from"node:buffer";import{g as s}from"../virtual/_commonjsHelpers.mjs";import*as o from"node:stream";var a={},c={exports:{}};const u=s(n);!function(e,r){var t=u,n=t.Buffer;function copyProps(e,r){for(var t in e)r[t]=e[t]}function SafeBuffer(e,r,t){return n(e,r,t)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(copyProps(t,r),r.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(n.prototype),copyProps(n,SafeBuffer),SafeBuffer.from=function(e,r,t){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,r,t)},SafeBuffer.alloc=function(e,r,t){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==r?"string"==typeof t?i.fill(r,t):i.fill(r):i.fill(0),i},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return t.SlowBuffer(e)}}(c,c.exports);var f=c.exports;const l=s(o),p=s(e);var h=f.Buffer,m=l;function DataStream$2(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=h.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=h.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,r.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}p.inherits(DataStream$2,m),DataStream$2.prototype.write=function(e){this.buffer=h.concat([this.buffer,h.from(e)]),this.emit("data",e)},DataStream$2.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};var E=DataStream$2;const y=s(t);function getParamSize(e){return(e/8|0)+(e%8==0?0:1)}var v={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};var paramBytesForAlg_1=function(e){var r=v[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')},d=f.Buffer,g=paramBytesForAlg_1,S=128;function signatureAsBuffer(e){if(d.isBuffer(e))return e;if("string"==typeof e)return d.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function countPadding(e,r,t){for(var n=0;r+n<t&&0===e[r+n];)++n;return e[r+n]>=S&&--n,n}var $,w,b={derToJose:function(e,r){e=signatureAsBuffer(e);var t=g(r),n=t+1,i=e.length,s=0;if(48!==e[s++])throw new Error('Could not find expected "seq"');var o=e[s++];if(129===o&&(o=e[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(2!==e[s++])throw new Error('Could not find expected "int" for "r"');var a=e[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var c=s;if(s+=a,2!==e[s++])throw new Error('Could not find expected "int" for "s"');var u=e[s++];if(i-s!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-s)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=s;if((s+=u)!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var l=t-a,p=t-u,h=d.allocUnsafe(l+a+p+u);for(s=0;s<l;++s)h[s]=0;e.copy(h,s,c+Math.max(-l,0),c+a);for(var m=s=t;s<m+p;++s)h[s]=0;return e.copy(h,s,f+Math.max(-p,0),f+u),h=(h=h.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,r){e=signatureAsBuffer(e);var t=g(r),n=e.length;if(n!==2*t)throw new TypeError('"'+r+'" signatures must be "'+2*t+'" bytes, saw "'+n+'"');var i=countPadding(e,0,t),s=countPadding(e,t,e.length),o=t-i,a=t-s,c=2+o+1+1+a,u=c<S,f=d.allocUnsafe((u?2:3)+c),l=0;return f[l++]=48,u?f[l++]=c:(f[l++]=129,f[l++]=255&c),f[l++]=2,f[l++]=o,i<0?(f[l++]=0,l+=e.copy(f,l,0,t)):l+=e.copy(f,l,i,t),f[l++]=2,f[l++]=a,s<0?(f[l++]=0,e.copy(f,l,t)):e.copy(f,l,t+s),f}};function requireBufferEqualConstantTime(){if(w)return $;w=1;var e=u.Buffer,r=u.SlowBuffer;function bufferEq(r,t){if(!e.isBuffer(r)||!e.isBuffer(t))return!1;if(r.length!==t.length)return!1;for(var n=0,i=0;i<r.length;i++)n|=r[i]^t[i];return 0===n}$=bufferEq,bufferEq.install=function(){e.prototype.equal=r.prototype.equal=function(e){return bufferEq(this,e)}};var t=e.prototype.equal,n=r.prototype.equal;return bufferEq.restore=function(){e.prototype.equal=t,r.prototype.equal=n},$}var R,I=f.Buffer,O=y,A=b,L=p,N="secret must be a string or buffer",T="key must be a string or a buffer",P="function"==typeof O.createPublicKey;function checkIsPublicKey(e){if(!I.isBuffer(e)&&"string"!=typeof e){if(!P)throw typeError(T);if("object"!=typeof e)throw typeError(T);if("string"!=typeof e.type)throw typeError(T);if("string"!=typeof e.asymmetricKeyType)throw typeError(T);if("function"!=typeof e.export)throw typeError(T)}}function checkIsPrivateKey(e){if(!I.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw typeError("key must be a string, a buffer or an object")}function fromBase64(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(e){var r=4-(e=e.toString()).length%4;if(4!==r)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(e){var r=[].slice.call(arguments,1),t=L.format.bind(L,e).apply(null,r);return new TypeError(t)}function normalizeInput(e){var r;return r=e,I.isBuffer(r)||"string"==typeof r||(e=JSON.stringify(e)),e}function createHmacSigner(e){return function(r,t){!function(e){if(!I.isBuffer(e)){if("string"==typeof e)return e;if(!P)throw typeError(N);if("object"!=typeof e)throw typeError(N);if("secret"!==e.type)throw typeError(N);if("function"!=typeof e.export)throw typeError(N)}}(t),r=normalizeInput(r);var n=O.createHmac("sha"+e,t);return fromBase64((n.update(r),n.digest("base64")))}}P&&(T+=" or a KeyObject",N+="or a KeyObject");var j="timingSafeEqual"in O?function(e,r){return e.byteLength===r.byteLength&&O.timingSafeEqual(e,r)}:function(e,r){return R||(R=requireBufferEqualConstantTime()),R(e,r)};function createHmacVerifier(e){return function(r,t,n){var i=createHmacSigner(e)(r,n);return j(I.from(t),I.from(i))}}function createKeySigner(e){return function(r,t){checkIsPrivateKey(t),r=normalizeInput(r);var n=O.createSign("RSA-SHA"+e);return fromBase64((n.update(r),n.sign(t,"base64")))}}function createKeyVerifier(e){return function(r,t,n){checkIsPublicKey(n),r=normalizeInput(r),t=toBase64(t);var i=O.createVerify("RSA-SHA"+e);return i.update(r),i.verify(n,t,"base64")}}function createPSSKeySigner(e){return function(r,t){checkIsPrivateKey(t),r=normalizeInput(r);var n=O.createSign("RSA-SHA"+e);return fromBase64((n.update(r),n.sign({key:t,padding:O.constants.RSA_PKCS1_PSS_PADDING,saltLength:O.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function createPSSKeyVerifier(e){return function(r,t,n){checkIsPublicKey(n),r=normalizeInput(r),t=toBase64(t);var i=O.createVerify("RSA-SHA"+e);return i.update(r),i.verify({key:n,padding:O.constants.RSA_PKCS1_PSS_PADDING,saltLength:O.constants.RSA_PSS_SALTLEN_DIGEST},t,"base64")}}function createECDSASigner(e){var r=createKeySigner(e);return function(){var t=r.apply(null,arguments);return t=A.derToJose(t,"ES"+e)}}function createECDSAVerifer(e){var r=createKeyVerifier(e);return function(t,n,i){return n=A.joseToDer(n,"ES"+e).toString("base64"),r(t,n,i)}}function createNoneSigner(){return function(){return""}}function createNoneVerifier(){return function(e,r){return""===r}}var jwa$2=function(e){var r={hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner},t={hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw typeError('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),s=n[2];return{sign:r[i](s),verify:t[i](s)}},C=u.Buffer,tostring=function(e){return"string"==typeof e?e:"number"==typeof e||C.isBuffer(e)?e.toString():JSON.stringify(e)},D=f.Buffer,k=E,x=jwa$2,M=l,F=tostring,G=p;function base64url(e,r){return D.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSign(e){var r=e.header,t=e.payload,n=e.secret||e.privateKey,i=e.encoding,s=x(r.alg),o=function(e,r,t){t=t||"utf8";var n=base64url(F(e),"binary"),i=base64url(F(r),t);return G.format("%s.%s",n,i)}(r,t,i),a=s.sign(o,n);return G.format("%s.%s",o,a)}function SignStream$1(e){var r=e.secret||e.privateKey||e.key,t=new k(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new k(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}G.inherits(SignStream$1,M),SignStream$1.prototype.sign=function(){try{var e=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},SignStream$1.sign=jwsSign;var B=SignStream$1,V=f.Buffer,_=E,K=jwa$2,U=l,q=tostring,H=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function safeJsonParse(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function headerFromJWS(e){var r=e.split(".",1)[0];return safeJsonParse(V.from(r,"base64").toString("binary"))}function signatureFromJWS(e){return e.split(".")[2]}function isValidJws(e){return H.test(e)&&!!headerFromJWS(e)}function jwsVerify(e,r,t){if(!r){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=signatureFromJWS(e=q(e)),s=function(e){return e.split(".",2).join(".")}(e);return K(r).verify(s,i,t)}function jwsDecode(e,r){if(r=r||{},!isValidJws(e=q(e)))return null;var t=headerFromJWS(e);if(!t)return null;var n=function(e,r){r=r||"utf8";var t=e.split(".")[1];return V.from(t,"base64").toString(r)}(e);return("JWT"===t.typ||r.json)&&(n=JSON.parse(n,r.encoding)),{header:t,payload:n,signature:signatureFromJWS(e)}}function VerifyStream$1(e){var r=(e=e||{}).secret||e.publicKey||e.key,t=new _(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new _(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}p.inherits(VerifyStream$1,U),VerifyStream$1.prototype.verify=function(){try{var e=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer),r=jwsDecode(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},VerifyStream$1.decode=jwsDecode,VerifyStream$1.isValid=isValidJws,VerifyStream$1.verify=jwsVerify;var X=B,z=VerifyStream$1;a.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],a.sign=X.sign,a.verify=z.verify,a.decode=z.decode,a.isValid=z.isValid,a.createSign=function(e){return new X(e)},a.createVerify=function(e){return new z(e)};var J=a,decode$1=function(e,r){r=r||{};var t=J.decode(e,r);if(!t)return null;var n=t.payload;if("string"==typeof n)try{var i=JSON.parse(n);null!==i&&"object"==typeof i&&(n=i)}catch(e){}return!0===r.complete?{header:t.header,payload:n,signature:t.signature}:n},JsonWebTokenError$3=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};(JsonWebTokenError$3.prototype=Object.create(Error.prototype)).constructor=JsonWebTokenError$3;var W=JsonWebTokenError$3,Y=W,NotBeforeError$1=function(e,r){Y.call(this,e),this.name="NotBeforeError",this.date=r};(NotBeforeError$1.prototype=Object.create(Y.prototype)).constructor=NotBeforeError$1;var Z=NotBeforeError$1,Q=W,TokenExpiredError$1=function(e,r){Q.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};(TokenExpiredError$1.prototype=Object.create(Q.prototype)).constructor=TokenExpiredError$1;var ee=TokenExpiredError$1,re=1e3,te=60*re,ne=60*te,ie=24*ne,se=7*ie,oe=365.25*ie;function plural(e,r,t,n){var i=r>=1.5*t;return Math.round(e/t)+" "+n+(i?"s":"")}var ms=function(e,r){r=r||{};var t=typeof e;if("string"===t&&e.length>0)return function(e){if((e=String(e)).length>100)return;var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return;var t=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*oe;case"weeks":case"week":case"w":return t*se;case"days":case"day":case"d":return t*ie;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ne;case"minutes":case"minute":case"mins":case"min":case"m":return t*te;case"seconds":case"second":case"secs":case"sec":case"s":return t*re;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}(e);if("number"===t&&isFinite(e))return r.long?function(e){var r=Math.abs(e);if(r>=ie)return plural(e,r,ie,"day");if(r>=ne)return plural(e,r,ne,"hour");if(r>=te)return plural(e,r,te,"minute");if(r>=re)return plural(e,r,re,"second");return e+" ms"}(e):function(e){var r=Math.abs(e);if(r>=ie)return Math.round(e/ie)+"d";if(r>=ne)return Math.round(e/ne)+"h";if(r>=te)return Math.round(e/te)+"m";if(r>=re)return Math.round(e/re)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},timespan$2=function(e,r){var t=r||Math.floor(Date.now()/1e3);if("string"==typeof e){var n=ms(e);if(void 0===n)return;return Math.floor(t+n/1e3)}return"number"==typeof e?t+e:void 0},ae={exports:{}};var ce={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var ue="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=ce,s=ue,o=(r=e.exports={}).re=[],a=r.safeRe=[],c=r.src=[],u=r.safeSrc=[],f=r.t={};let l=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[p,n]],createToken=(e,r,t)=>{const n=(e=>{for(const[r,t]of h)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e})(r),i=l++;s(e,i,r),f[e]=i,c[i]=r,u[i]=n,o[i]=new RegExp(r,t?"g":void 0),a[i]=new RegExp(n,t?"g":void 0)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*"),createToken("NUMERICIDENTIFIERLOOSE","\\d+"),createToken("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),createToken("MAINVERSION",`(${c[f.NUMERICIDENTIFIER]})\\.(${c[f.NUMERICIDENTIFIER]})\\.(${c[f.NUMERICIDENTIFIER]})`),createToken("MAINVERSIONLOOSE",`(${c[f.NUMERICIDENTIFIERLOOSE]})\\.(${c[f.NUMERICIDENTIFIERLOOSE]})\\.(${c[f.NUMERICIDENTIFIERLOOSE]})`),createToken("PRERELEASEIDENTIFIER",`(?:${c[f.NONNUMERICIDENTIFIER]}|${c[f.NUMERICIDENTIFIER]})`),createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${c[f.NONNUMERICIDENTIFIER]}|${c[f.NUMERICIDENTIFIERLOOSE]})`),createToken("PRERELEASE",`(?:-(${c[f.PRERELEASEIDENTIFIER]}(?:\\.${c[f.PRERELEASEIDENTIFIER]})*))`),createToken("PRERELEASELOOSE",`(?:-?(${c[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[f.PRERELEASEIDENTIFIERLOOSE]})*))`),createToken("BUILDIDENTIFIER",`${p}+`),createToken("BUILD",`(?:\\+(${c[f.BUILDIDENTIFIER]}(?:\\.${c[f.BUILDIDENTIFIER]})*))`),createToken("FULLPLAIN",`v?${c[f.MAINVERSION]}${c[f.PRERELEASE]}?${c[f.BUILD]}?`),createToken("FULL",`^${c[f.FULLPLAIN]}$`),createToken("LOOSEPLAIN",`[v=\\s]*${c[f.MAINVERSIONLOOSE]}${c[f.PRERELEASELOOSE]}?${c[f.BUILD]}?`),createToken("LOOSE",`^${c[f.LOOSEPLAIN]}$`),createToken("GTLT","((?:<|>)?=?)"),createToken("XRANGEIDENTIFIERLOOSE",`${c[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),createToken("XRANGEIDENTIFIER",`${c[f.NUMERICIDENTIFIER]}|x|X|\\*`),createToken("XRANGEPLAIN",`[v=\\s]*(${c[f.XRANGEIDENTIFIER]})(?:\\.(${c[f.XRANGEIDENTIFIER]})(?:\\.(${c[f.XRANGEIDENTIFIER]})(?:${c[f.PRERELEASE]})?${c[f.BUILD]}?)?)?`),createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${c[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[f.XRANGEIDENTIFIERLOOSE]})(?:${c[f.PRERELEASELOOSE]})?${c[f.BUILD]}?)?)?`),createToken("XRANGE",`^${c[f.GTLT]}\\s*${c[f.XRANGEPLAIN]}$`),createToken("XRANGELOOSE",`^${c[f.GTLT]}\\s*${c[f.XRANGEPLAINLOOSE]}$`),createToken("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),createToken("COERCE",`${c[f.COERCEPLAIN]}(?:$|[^\\d])`),createToken("COERCEFULL",c[f.COERCEPLAIN]+`(?:${c[f.PRERELEASE]})?`+`(?:${c[f.BUILD]})?(?:$|[^\\d])`),createToken("COERCERTL",c[f.COERCE],!0),createToken("COERCERTLFULL",c[f.COERCEFULL],!0),createToken("LONETILDE","(?:~>?)"),createToken("TILDETRIM",`(\\s*)${c[f.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",createToken("TILDE",`^${c[f.LONETILDE]}${c[f.XRANGEPLAIN]}$`),createToken("TILDELOOSE",`^${c[f.LONETILDE]}${c[f.XRANGEPLAINLOOSE]}$`),createToken("LONECARET","(?:\\^)"),createToken("CARETTRIM",`(\\s*)${c[f.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",createToken("CARET",`^${c[f.LONECARET]}${c[f.XRANGEPLAIN]}$`),createToken("CARETLOOSE",`^${c[f.LONECARET]}${c[f.XRANGEPLAINLOOSE]}$`),createToken("COMPARATORLOOSE",`^${c[f.GTLT]}\\s*(${c[f.LOOSEPLAIN]})$|^$`),createToken("COMPARATOR",`^${c[f.GTLT]}\\s*(${c[f.FULLPLAIN]})$|^$`),createToken("COMPARATORTRIM",`(\\s*)${c[f.GTLT]}\\s*(${c[f.LOOSEPLAIN]}|${c[f.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",createToken("HYPHENRANGE",`^\\s*(${c[f.XRANGEPLAIN]})\\s+-\\s+(${c[f.XRANGEPLAIN]})\\s*$`),createToken("HYPHENRANGELOOSE",`^\\s*(${c[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[f.XRANGEPLAINLOOSE]})\\s*$`),createToken("STAR","(<|>)?=?\\s*\\*"),createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(ae,ae.exports);var fe=ae.exports;const le=Object.freeze({loose:!0}),pe=Object.freeze({});var parseOptions_1=e=>e?"object"!=typeof e?le:e:pe;const he=/^[0-9]+$/,compareIdentifiers$1=(e,r)=>{const t=he.test(e),n=he.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1};var me={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers:(e,r)=>compareIdentifiers$1(r,e)};const Ee=ue,{MAX_LENGTH:ye,MAX_SAFE_INTEGER:ve}=ce,{safeRe:de,t:ge}=fe,Se=parseOptions_1,{compareIdentifiers:$e}=me;var we=class SemVer{constructor(e,r){if(r=Se(r),e instanceof SemVer){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>ye)throw new TypeError(`version is longer than ${ye} characters`);Ee("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const t=e.trim().match(r.loose?de[ge.LOOSE]:de[ge.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>ve||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ve||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ve||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const r=+e;if(r>=0&&r<ve)return r}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ee("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),$e(this.major,e.major)||$e(this.minor,e.minor)||$e(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const t=this.prerelease[r],n=e.prerelease[r];if(Ee("prerelease compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return $e(t,n)}while(++r)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let r=0;do{const t=this.build[r],n=e.build[r];if(Ee("build compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return $e(t,n)}while(++r)}inc(e,r,t){if(e.startsWith("pre")){if(!r&&!1===t)throw new Error("invalid increment argument: identifier is empty");if(r){const e=`-${r}`.match(this.options.loose?de[ge.PRERELEASELOOSE]:de[ge.PRERELEASE]);if(!e||e[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,t),this.inc("pre",r,t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",r,t),this.inc("pre",r,t);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(t)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(r===this.prerelease.join(".")&&!1===t)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(r){let n=[r,e];!1===t&&(n=[r]),0===$e(this.prerelease[0],r)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const be=we;var parse_1=(e,r,t=!1)=>{if(e instanceof be)return e;try{return new be(e,r)}catch(e){if(!t)return null;throw e}};const Re=parse_1;var valid_1=(e,r)=>{const t=Re(e,r);return t?t.version:null};const Ie=parse_1;var clean_1=(e,r)=>{const t=Ie(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};const Oe=we;var inc_1=(e,r,t,n,i)=>{"string"==typeof t&&(i=n,n=t,t=void 0);try{return new Oe(e instanceof Oe?e.version:e,t).inc(r,n,i).version}catch(e){return null}};const Ae=parse_1;var diff_1=(e,r)=>{const t=Ae(e,null,!0),n=Ae(r,null,!0),i=t.compare(n);if(0===i)return null;const s=i>0,o=s?t:n,a=s?n:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(0===a.compareMain(o))return a.minor&&!a.patch?"minor":"patch"}const u=c?"pre":"";return t.major!==n.major?u+"major":t.minor!==n.minor?u+"minor":t.patch!==n.patch?u+"patch":"prerelease"};const Le=we;var major_1=(e,r)=>new Le(e,r).major;const Ne=we;var minor_1=(e,r)=>new Ne(e,r).minor;const Te=we;var patch_1=(e,r)=>new Te(e,r).patch;const Pe=parse_1;var prerelease_1=(e,r)=>{const t=Pe(e,r);return t&&t.prerelease.length?t.prerelease:null};const je=we;var compare_1=(e,r,t)=>new je(e,t).compare(new je(r,t));const Ce=compare_1;var rcompare_1=(e,r,t)=>Ce(r,e,t);const De=compare_1;var compareLoose_1=(e,r)=>De(e,r,!0);const ke=we;var compareBuild_1=(e,r,t)=>{const n=new ke(e,t),i=new ke(r,t);return n.compare(i)||n.compareBuild(i)};const xe=compareBuild_1;var sort_1=(e,r)=>e.sort((e,t)=>xe(e,t,r));const Me=compareBuild_1;var rsort_1=(e,r)=>e.sort((e,t)=>Me(t,e,r));const Fe=compare_1;var gt_1=(e,r,t)=>Fe(e,r,t)>0;const Ge=compare_1;var lt_1=(e,r,t)=>Ge(e,r,t)<0;const Be=compare_1;var eq_1=(e,r,t)=>0===Be(e,r,t);const Ve=compare_1;var neq_1=(e,r,t)=>0!==Ve(e,r,t);const _e=compare_1;var gte_1=(e,r,t)=>_e(e,r,t)>=0;const Ke=compare_1;var lte_1=(e,r,t)=>Ke(e,r,t)<=0;const Ue=eq_1,qe=neq_1,He=gt_1,Xe=gte_1,ze=lt_1,Je=lte_1;var cmp_1=(e,r,t,n)=>{switch(r){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e===t;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e!==t;case"":case"=":case"==":return Ue(e,t,n);case"!=":return qe(e,t,n);case">":return He(e,t,n);case">=":return Xe(e,t,n);case"<":return ze(e,t,n);case"<=":return Je(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};const We=we,Ye=parse_1,{safeRe:Ze,t:Qe}=fe;var er,rr,tr,nr,ir,sr,coerce_1=(e,r)=>{if(e instanceof We)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let t=null;if((r=r||{}).rtl){const n=r.includePrerelease?Ze[Qe.COERCERTLFULL]:Ze[Qe.COERCERTL];let i;for(;(i=n.exec(e))&&(!t||t.index+t[0].length!==e.length);)t&&i.index+i[0].length===t.index+t[0].length||(t=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else t=e.match(r.includePrerelease?Ze[Qe.COERCEFULL]:Ze[Qe.COERCE]);if(null===t)return null;const n=t[2],i=t[3]||"0",s=t[4]||"0",o=r.includePrerelease&&t[5]?`-${t[5]}`:"",a=r.includePrerelease&&t[6]?`+${t[6]}`:"";return Ye(`${n}.${i}.${s}${o}${a}`,r)};function requireLrucache(){if(rr)return er;rr=1;return er=class{constructor(){this.max=1e3,this.map=new Map}get(e){const r=this.map.get(e);return void 0===r?void 0:(this.map.delete(e),this.map.set(e,r),r)}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&void 0!==r){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,r)}return this}}}function requireRange(){if(nr)return tr;nr=1;const e=/\s+/g;class Range{constructor(r,i){if(i=t(i),r instanceof Range)return r.loose===!!i.loose&&r.includePrerelease===!!i.includePrerelease?r:new Range(r.raw,i);if(r instanceof n)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!isNullSet(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&isAny(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const r=this.set[e];for(let e=0;e<r.length;e++)e>0&&(this.formatted+=" "),this.formatted+=r[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&l)|(this.options.loose&&p))+":"+e,s=r.get(t);if(s)return s;const h=this.options.loose,m=h?o[a.HYPHENRANGELOOSE]:o[a.HYPHENRANGE];e=e.replace(m,hyphenReplace(this.options.includePrerelease)),i("hyphen replace",e),e=e.replace(o[a.COMPARATORTRIM],c),i("comparator trim",e),e=e.replace(o[a.TILDETRIM],u),i("tilde trim",e),e=e.replace(o[a.CARETTRIM],f),i("caret trim",e);let E=e.split(" ").map(e=>parseComparator(e,this.options)).join(" ").split(/\s+/).map(e=>replaceGTE0(e,this.options));h&&(E=E.filter(e=>(i("loose invalid filter",e,this.options),!!e.match(o[a.COMPARATORLOOSE])))),i("range list",E);const y=new Map,v=E.map(e=>new n(e,this.options));for(const e of v){if(isNullSet(e))return[e];y.set(e.value,e)}y.size>1&&y.has("")&&y.delete("");const d=[...y.values()];return r.set(t,d),d}intersects(e,r){if(!(e instanceof Range))throw new TypeError("a Range is required");return this.set.some(t=>isSatisfiable(t,r)&&e.set.some(e=>isSatisfiable(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(testSet(this.set[r],e,this.options))return!0;return!1}}tr=Range;const r=new(requireLrucache()),t=parseOptions_1,n=requireComparator(),i=ue,s=we,{safeRe:o,t:a,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:f}=fe,{FLAG_INCLUDE_PRERELEASE:l,FLAG_LOOSE:p}=ce,isNullSet=e=>"<0.0.0-0"===e.value,isAny=e=>""===e.value,isSatisfiable=(e,r)=>{let t=!0;const n=e.slice();let i=n.pop();for(;t&&n.length;)t=n.every(e=>i.intersects(e,r)),i=n.pop();return t},parseComparator=(e,r)=>(i("comp",e,r),e=replaceCarets(e,r),i("caret",e),e=replaceTildes(e,r),i("tildes",e),e=replaceXRanges(e,r),i("xrange",e),e=replaceStars(e,r),i("stars",e),e),isX=e=>!e||"x"===e.toLowerCase()||"*"===e,replaceTildes=(e,r)=>e.trim().split(/\s+/).map(e=>replaceTilde(e,r)).join(" "),replaceTilde=(e,r)=>{const t=r.loose?o[a.TILDELOOSE]:o[a.TILDE];return e.replace(t,(r,t,n,s,o)=>{let a;return i("tilde",e,r,t,n,s,o),isX(t)?a="":isX(n)?a=`>=${t}.0.0 <${+t+1}.0.0-0`:isX(s)?a=`>=${t}.${n}.0 <${t}.${+n+1}.0-0`:o?(i("replaceTilde pr",o),a=`>=${t}.${n}.${s}-${o} <${t}.${+n+1}.0-0`):a=`>=${t}.${n}.${s} <${t}.${+n+1}.0-0`,i("tilde return",a),a})},replaceCarets=(e,r)=>e.trim().split(/\s+/).map(e=>replaceCaret(e,r)).join(" "),replaceCaret=(e,r)=>{i("caret",e,r);const t=r.loose?o[a.CARETLOOSE]:o[a.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,(r,t,s,o,a)=>{let c;return i("caret",e,r,t,s,o,a),isX(t)?c="":isX(s)?c=`>=${t}.0.0${n} <${+t+1}.0.0-0`:isX(o)?c="0"===t?`>=${t}.${s}.0${n} <${t}.${+s+1}.0-0`:`>=${t}.${s}.0${n} <${+t+1}.0.0-0`:a?(i("replaceCaret pr",a),c="0"===t?"0"===s?`>=${t}.${s}.${o}-${a} <${t}.${s}.${+o+1}-0`:`>=${t}.${s}.${o}-${a} <${t}.${+s+1}.0-0`:`>=${t}.${s}.${o}-${a} <${+t+1}.0.0-0`):(i("no pr"),c="0"===t?"0"===s?`>=${t}.${s}.${o}${n} <${t}.${s}.${+o+1}-0`:`>=${t}.${s}.${o}${n} <${t}.${+s+1}.0-0`:`>=${t}.${s}.${o} <${+t+1}.0.0-0`),i("caret return",c),c})},replaceXRanges=(e,r)=>(i("replaceXRanges",e,r),e.split(/\s+/).map(e=>replaceXRange(e,r)).join(" ")),replaceXRange=(e,r)=>{e=e.trim();const t=r.loose?o[a.XRANGELOOSE]:o[a.XRANGE];return e.replace(t,(t,n,s,o,a,c)=>{i("xRange",e,t,n,s,o,a,c);const u=isX(s),f=u||isX(o),l=f||isX(a),p=l;return"="===n&&p&&(n=""),c=r.includePrerelease?"-0":"",u?t=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(f&&(o=0),a=0,">"===n?(n=">=",f?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",f?s=+s+1:o=+o+1),"<"===n&&(c="-0"),t=`${n+s}.${o}.${a}${c}`):f?t=`>=${s}.0.0${c} <${+s+1}.0.0-0`:l&&(t=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),i("xRange return",t),t})},replaceStars=(e,r)=>(i("replaceStars",e,r),e.trim().replace(o[a.STAR],"")),replaceGTE0=(e,r)=>(i("replaceGTE0",e,r),e.trim().replace(o[r.includePrerelease?a.GTE0PRE:a.GTE0],"")),hyphenReplace=e=>(r,t,n,i,s,o,a,c,u,f,l,p)=>`${t=isX(n)?"":isX(i)?`>=${n}.0.0${e?"-0":""}`:isX(s)?`>=${n}.${i}.0${e?"-0":""}`:o?`>=${t}`:`>=${t}${e?"-0":""}`} ${c=isX(u)?"":isX(f)?`<${+u+1}.0.0-0`:isX(l)?`<${u}.${+f+1}.0-0`:p?`<=${u}.${f}.${l}-${p}`:e?`<${u}.${f}.${+l+1}-0`:`<=${c}`}`.trim(),testSet=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(i(e[t].semver),e[t].semver!==n.ANY&&e[t].semver.prerelease.length>0){const n=e[t].semver;if(n.major===r.major&&n.minor===r.minor&&n.patch===r.patch)return!0}return!1}return!0};return tr}function requireComparator(){if(sr)return ir;sr=1;const e=Symbol("SemVer ANY");class Comparator{static get ANY(){return e}constructor(t,n){if(n=r(n),t instanceof Comparator){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),s("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(r){const i=this.options.loose?t[n.COMPARATORLOOSE]:t[n.COMPARATOR],s=r.match(i);if(!s)throw new TypeError(`Invalid comparator: ${r}`);this.operator=void 0!==s[1]?s[1]:"","="===this.operator&&(this.operator=""),s[2]?this.semver=new o(s[2],this.options.loose):this.semver=e}toString(){return this.value}test(r){if(s("Comparator.test",r,this.options.loose),this.semver===e||r===e)return!0;if("string"==typeof r)try{r=new o(r,this.options)}catch(e){return!1}return i(r,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Comparator))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new a(e.value,t).test(this.value):""===e.operator?""===e.value||new a(this.value,t).test(e.semver):(!(t=r(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(i(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(i(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}ir=Comparator;const r=parseOptions_1,{safeRe:t,t:n}=fe,i=cmp_1,s=ue,o=we,a=requireRange();return ir}const or=requireRange();var satisfies_1=(e,r,t)=>{try{r=new or(r,t)}catch(e){return!1}return r.test(e)};const ar=requireRange();var toComparators_1=(e,r)=>new ar(e,r).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "));const cr=we,ur=requireRange();var maxSatisfying_1=(e,r,t)=>{let n=null,i=null,s=null;try{s=new ur(r,t)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(n&&-1!==i.compare(e)||(n=e,i=new cr(n,t)))}),n};const fr=we,lr=requireRange();var minSatisfying_1=(e,r,t)=>{let n=null,i=null,s=null;try{s=new lr(r,t)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(n&&1!==i.compare(e)||(n=e,i=new fr(n,t)))}),n};const pr=we,hr=requireRange(),mr=gt_1;var minVersion_1=(e,r)=>{e=new hr(e,r);let t=new pr("0.0.0");if(e.test(t))return t;if(t=new pr("0.0.0-0"),e.test(t))return t;t=null;for(let r=0;r<e.set.length;++r){const n=e.set[r];let i=null;n.forEach(e=>{const r=new pr(e.semver.version);switch(e.operator){case">":0===r.prerelease.length?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":i&&!mr(r,i)||(i=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),!i||t&&!mr(t,i)||(t=i)}return t&&e.test(t)?t:null};const Er=requireRange();var valid$1=(e,r)=>{try{return new Er(e,r).range||"*"}catch(e){return null}};const yr=we,vr=requireComparator(),{ANY:dr}=vr,gr=requireRange(),Sr=satisfies_1,$r=gt_1,wr=lt_1,br=lte_1,Rr=gte_1;var outside_1=(e,r,t,n)=>{let i,s,o,a,c;switch(e=new yr(e,n),r=new gr(r,n),t){case">":i=$r,s=br,o=wr,a=">",c=">=";break;case"<":i=wr,s=Rr,o=$r,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Sr(e,r,n))return!1;for(let t=0;t<r.set.length;++t){const u=r.set[t];let f=null,l=null;if(u.forEach(e=>{e.semver===dr&&(e=new vr(">=0.0.0")),f=f||e,l=l||e,i(e.semver,f.semver,n)?f=e:o(e.semver,l.semver,n)&&(l=e)}),f.operator===a||f.operator===c)return!1;if((!l.operator||l.operator===a)&&s(e,l.semver))return!1;if(l.operator===c&&o(e,l.semver))return!1}return!0};const Ir=outside_1;var gtr_1=(e,r,t)=>Ir(e,r,">",t);const Or=outside_1;var ltr_1=(e,r,t)=>Or(e,r,"<",t);const Ar=requireRange();var intersects_1=(e,r,t)=>(e=new Ar(e,t),r=new Ar(r,t),e.intersects(r,t));const Lr=satisfies_1,Nr=compare_1;const Tr=requireRange(),Pr=requireComparator(),{ANY:jr}=Pr,Cr=satisfies_1,Dr=compare_1,kr=[new Pr(">=0.0.0-0")],xr=[new Pr(">=0.0.0")],simpleSubset=(e,r,t)=>{if(e===r)return!0;if(1===e.length&&e[0].semver===jr){if(1===r.length&&r[0].semver===jr)return!0;e=t.includePrerelease?kr:xr}if(1===r.length&&r[0].semver===jr){if(t.includePrerelease)return!0;r=xr}const n=new Set;let i,s,o,a,c,u,f;for(const r of e)">"===r.operator||">="===r.operator?i=higherGT(i,r,t):"<"===r.operator||"<="===r.operator?s=lowerLT(s,r,t):n.add(r.semver);if(n.size>1)return null;if(i&&s){if(o=Dr(i.semver,s.semver,t),o>0)return null;if(0===o&&(">="!==i.operator||"<="!==s.operator))return null}for(const e of n){if(i&&!Cr(e,String(i),t))return null;if(s&&!Cr(e,String(s),t))return null;for(const n of r)if(!Cr(e,String(n),t))return!1;return!0}let l=!(!s||t.includePrerelease||!s.semver.prerelease.length)&&s.semver,p=!(!i||t.includePrerelease||!i.semver.prerelease.length)&&i.semver;l&&1===l.prerelease.length&&"<"===s.operator&&0===l.prerelease[0]&&(l=!1);for(const e of r){if(f=f||">"===e.operator||">="===e.operator,u=u||"<"===e.operator||"<="===e.operator,i)if(p&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===p.major&&e.semver.minor===p.minor&&e.semver.patch===p.patch&&(p=!1),">"===e.operator||">="===e.operator){if(a=higherGT(i,e,t),a===e&&a!==i)return!1}else if(">="===i.operator&&!Cr(i.semver,String(e),t))return!1;if(s)if(l&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===l.major&&e.semver.minor===l.minor&&e.semver.patch===l.patch&&(l=!1),"<"===e.operator||"<="===e.operator){if(c=lowerLT(s,e,t),c===e&&c!==s)return!1}else if("<="===s.operator&&!Cr(s.semver,String(e),t))return!1;if(!e.operator&&(s||i)&&0!==o)return!1}return!(i&&u&&!s&&0!==o)&&(!(s&&f&&!i&&0!==o)&&(!p&&!l))},higherGT=(e,r,t)=>{if(!e)return r;const n=Dr(e.semver,r.semver,t);return n>0?e:n<0||">"===r.operator&&">="===e.operator?r:e},lowerLT=(e,r,t)=>{if(!e)return r;const n=Dr(e.semver,r.semver,t);return n<0?e:n>0||"<"===r.operator&&"<="===e.operator?r:e};var subset_1=(e,r,t={})=>{if(e===r)return!0;e=new Tr(e,t),r=new Tr(r,t);let n=!1;e:for(const i of e.set){for(const e of r.set){const r=simpleSubset(i,e,t);if(n=n||null!==r,r)continue e}if(n)return!1}return!0};const Mr=fe,Fr=ce,Gr=we,Br=me,simplifyRange=(e,r,t)=>{const n=[];let i=null,s=null;const o=e.sort((e,r)=>Nr(e,r,t));for(const e of o){Lr(e,r,t)?(s=e,i||(i=e)):(s&&n.push([i,s]),s=null,i=null)}i&&n.push([i,null]);const a=[];for(const[e,r]of n)e===r?a.push(e):r||e!==o[0]?r?e===o[0]?a.push(`<=${r}`):a.push(`${e} - ${r}`):a.push(`>=${e}`):a.push("*");const c=a.join(" || "),u="string"==typeof r.raw?r.raw:String(r);return c.length<u.length?c:r};var Vr={parse:parse_1,valid:valid_1,clean:clean_1,inc:inc_1,diff:diff_1,major:major_1,minor:minor_1,patch:patch_1,prerelease:prerelease_1,compare:compare_1,rcompare:rcompare_1,compareLoose:compareLoose_1,compareBuild:compareBuild_1,sort:sort_1,rsort:rsort_1,gt:gt_1,lt:lt_1,eq:eq_1,neq:neq_1,gte:gte_1,lte:lte_1,cmp:cmp_1,coerce:coerce_1,Comparator:requireComparator(),Range:requireRange(),satisfies:satisfies_1,toComparators:toComparators_1,maxSatisfying:maxSatisfying_1,minSatisfying:minSatisfying_1,minVersion:minVersion_1,validRange:valid$1,outside:outside_1,gtr:gtr_1,ltr:ltr_1,intersects:intersects_1,simplifyRange:simplifyRange,subset:subset_1,SemVer:Gr,re:Mr.re,src:Mr.src,tokens:Mr.t,SEMVER_SPEC_VERSION:Fr.SEMVER_SPEC_VERSION,RELEASE_TYPES:Fr.RELEASE_TYPES,compareIdentifiers:Br.compareIdentifiers,rcompareIdentifiers:Br.rcompareIdentifiers};var _r=Vr.satisfies(r.version,">=15.7.0");var Kr=Vr.satisfies(r.version,">=16.9.0");const Ur=_r,qr=Kr,Hr={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},Xr={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};var validateAsymmetricKey$2=function(e,r){if(!e||!r)return;const t=r.asymmetricKeyType;if(!t)return;const n=Hr[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(Ur)switch(t){case"ec":const t=r.asymmetricKeyDetails.namedCurve,n=Xr[e];if(t!==n)throw new Error(`"alg" parameter "${e}" requires curve "${n}".`);break;case"rsa-pss":if(qr){const t=parseInt(e.slice(-3),10),{hashAlgorithm:n,mgf1HashAlgorithm:i,saltLength:s}=r.asymmetricKeyDetails;if(n!==`sha${t}`||i!==n)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==s&&s>t>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}},zr=Vr.satisfies(r.version,"^6.12.0 || >=8.0.0");const Jr=W,Wr=Z,Yr=ee,Zr=decode$1,Qr=timespan$2,et=validateAsymmetricKey$2,rt=zr,tt=a,{KeyObject:nt,createSecretKey:it,createPublicKey:st}=y,ot=["RS256","RS384","RS512"],at=["ES256","ES384","ES512"],ct=["RS256","RS384","RS512"],ut=["HS256","HS384","HS512"];rt&&(ot.splice(ot.length,0,"PS256","PS384","PS512"),ct.splice(ct.length,0,"PS256","PS384","PS512"));var ft=1/0,lt=9007199254740991,pt=17976931348623157e292,ht=NaN,mt="[object Arguments]",Et="[object Function]",yt="[object GeneratorFunction]",vt="[object String]",dt="[object Symbol]",gt=/^\s+|\s+$/g,St=/^[-+]0x[0-9a-f]+$/i,$t=/^0b[01]+$/i,wt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,Rt=parseInt;function baseIsNaN(e){return e!=e}function baseValues(e,r){return function(e,r){for(var t=-1,n=e?e.length:0,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}(r,function(r){return e[r]})}var It,Ot,At=Object.prototype,Lt=At.hasOwnProperty,Nt=At.toString,Tt=At.propertyIsEnumerable,Pt=(It=Object.keys,Ot=Object,function(e){return It(Ot(e))}),jt=Math.max;function arrayLikeKeys(e,r){var t=Ct(e)||function(e){return function(e){return isObjectLike$6(e)&&isArrayLike(e)}(e)&&Lt.call(e,"callee")&&(!Tt.call(e,"callee")||Nt.call(e)==mt)}(e)?function(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}(e.length,String):[],n=t.length,i=!!n;for(var s in e)!Lt.call(e,s)||i&&("length"==s||isIndex(s,n))||t.push(s);return t}function baseKeys(e){if(t=(r=e)&&r.constructor,n="function"==typeof t&&t.prototype||At,r!==n)return Pt(e);var r,t,n,i=[];for(var s in Object(e))Lt.call(e,s)&&"constructor"!=s&&i.push(s);return i}function isIndex(e,r){return!!(r=null==r?lt:r)&&("number"==typeof e||bt.test(e))&&e>-1&&e%1==0&&e<r}var Ct=Array.isArray;function isArrayLike(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=lt}(e.length)&&!function(e){var r=isObject$2(e)?Nt.call(e):"";return r==Et||r==yt}(e)}function isObject$2(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}function isObjectLike$6(e){return!!e&&"object"==typeof e}var lodash_includes=function(e,r,t,n){var i;e=isArrayLike(e)?e:(i=e)?baseValues(i,function(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}(i)):[],t=t&&!n?function(e){var r=function(e){if(!e)return 0===e?e:0;if(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||isObjectLike$6(e)&&Nt.call(e)==dt}(e))return ht;if(isObject$2(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=isObject$2(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(gt,"");var t=$t.test(e);return t||wt.test(e)?Rt(e.slice(2),t?2:8):St.test(e)?ht:+e}(e),e===ft||e===-1/0){return(e<0?-1:1)*pt}return e==e?e:0}(e),t=r%1;return r==r?t?r-t:r:0}(t):0;var s=e.length;return t<0&&(t=jt(s+t,0)),function(e){return"string"==typeof e||!Ct(e)&&isObjectLike$6(e)&&Nt.call(e)==vt}(e)?t<=s&&e.indexOf(r,t)>-1:!!s&&function(e,r,t){if(r!=r)return function(e,r,t){for(var n=e.length,i=t+-1;++i<n;)if(r(e[i],i,e))return i;return-1}(e,baseIsNaN,t);for(var n=t-1,i=e.length;++n<i;)if(e[n]===r)return n;return-1}(e,r,t)>-1},Dt=Object.prototype.toString;var lodash_isboolean=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==Dt.call(e)},kt=1/0,xt=17976931348623157e292,Mt=NaN,Ft="[object Symbol]",Gt=/^\s+|\s+$/g,Bt=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,Kt=parseInt,Ut=Object.prototype.toString;function isObject$1(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}var lodash_isinteger=function(e){return"number"==typeof e&&e==function(e){var r=function(e){if(!e)return 0===e?e:0;if(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&Ut.call(e)==Ft}(e))return Mt;if(isObject$1(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Gt,"");var t=Vt.test(e);return t||_t.test(e)?Kt(e.slice(2),t?2:8):Bt.test(e)?Mt:+e}(e),e===kt||e===-1/0){return(e<0?-1:1)*xt}return e==e?e:0}(e),t=r%1;return r==r?t?r-t:r:0}(e)};Object.prototype.toString;var qt=Function.prototype,Ht=Object.prototype,Xt=qt.toString,zt=Ht.hasOwnProperty,Jt=Xt.call(Object),Wt=Ht.toString,Yt=function(e,r){return function(t){return e(r(t))}}(Object.getPrototypeOf,Object);var lodash_isplainobject=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Wt.call(e)||function(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}(e))return!1;var r=Yt(e);if(null===r)return!0;var t=zt.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&Xt.call(t)==Jt},Zt=Object.prototype.toString,Qt=Array.isArray;var lodash_isstring=function(e){return"string"==typeof e||!Qt(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==Zt.call(e)};parseInt,Object.prototype.toString;const en=zr,rn=lodash_includes,tn=lodash_isboolean,nn=lodash_isinteger,sn=lodash_isplainobject,on=lodash_isstring,{KeyObject:an,createSecretKey:cn,createPrivateKey:un}=y,fn=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];en&&fn.splice(3,0,"PS256","PS384","PS512");rn.bind(null,fn);var jsonwebtoken_verify=function(e,r,t,n){let s;if("function"!=typeof t||n||(n=t,t={}),t||(t={}),t=Object.assign({},t),s=n||function(e,r){if(e)throw e;return r},t.clockTimestamp&&"number"!=typeof t.clockTimestamp)return s(new Jr("clockTimestamp must be a number"));if(void 0!==t.nonce&&("string"!=typeof t.nonce||""===t.nonce.trim()))return s(new Jr("nonce must be a non-empty string"));if(void 0!==t.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof t.allowInvalidAsymmetricKeyTypes)return s(new Jr("allowInvalidAsymmetricKeyTypes must be a boolean"));const o=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new Jr("jwt must be provided"));if("string"!=typeof e)return s(new Jr("jwt must be a string"));const a=e.split(".");if(3!==a.length)return s(new Jr("jwt malformed"));let c;try{c=Zr(e,{complete:!0})}catch(e){return s(e)}if(!c)return s(new Jr("invalid token"));const u=c.header;let f;if("function"==typeof r){if(!n)return s(new Jr("verify must be called asynchronous if secret or public key is provided as a callback"));f=r}else f=function(e,t){return t(null,r)};return f(u,function(r,n){if(r)return s(new Jr("error in secret or public key callback: "+r.message));const f=""!==a[2].trim();if(!f&&n)return s(new Jr("jwt signature is required"));if(f&&!n)return s(new Jr("secret or public key must be provided"));if(!f&&!t.algorithms)return s(new Jr('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=n&&!(n instanceof nt))try{n=st(n)}catch(e){try{n=it("string"==typeof n?i.from(n):n)}catch(e){return s(new Jr("secretOrPublicKey is not valid key material"))}}if(t.algorithms||("secret"===n.type?t.algorithms=ut:["rsa","rsa-pss"].includes(n.asymmetricKeyType)?t.algorithms=ct:"ec"===n.asymmetricKeyType?t.algorithms=at:t.algorithms=ot),-1===t.algorithms.indexOf(c.header.alg))return s(new Jr("invalid algorithm"));if(u.alg.startsWith("HS")&&"secret"!==n.type)return s(new Jr(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&"public"!==n.type)return s(new Jr(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{et(u.alg,n)}catch(e){return s(e)}let l;try{l=tt.verify(e,c.header.alg,n)}catch(e){return s(e)}if(!l)return s(new Jr("invalid signature"));const p=c.payload;if(void 0!==p.nbf&&!t.ignoreNotBefore){if("number"!=typeof p.nbf)return s(new Jr("invalid nbf value"));if(p.nbf>o+(t.clockTolerance||0))return s(new Wr("jwt not active",new Date(1e3*p.nbf)))}if(void 0!==p.exp&&!t.ignoreExpiration){if("number"!=typeof p.exp)return s(new Jr("invalid exp value"));if(o>=p.exp+(t.clockTolerance||0))return s(new Yr("jwt expired",new Date(1e3*p.exp)))}if(t.audience){const e=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(p.aud)?p.aud:[p.aud]).some(function(r){return e.some(function(e){return e instanceof RegExp?e.test(r):e===r})}))return s(new Jr("jwt audience invalid. expected: "+e.join(" or ")))}if(t.issuer){if("string"==typeof t.issuer&&p.iss!==t.issuer||Array.isArray(t.issuer)&&-1===t.issuer.indexOf(p.iss))return s(new Jr("jwt issuer invalid. expected: "+t.issuer))}if(t.subject&&p.sub!==t.subject)return s(new Jr("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&p.jti!==t.jwtid)return s(new Jr("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&p.nonce!==t.nonce)return s(new Jr("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if("number"!=typeof p.iat)return s(new Jr("iat required when maxAge is specified"));const e=Qr(t.maxAge,p.iat);if(void 0===e)return s(new Jr('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=e+(t.clockTolerance||0))return s(new Yr("maxAge exceeded",new Date(1e3*e)))}if(!0===t.complete){const e=c.signature;return s(null,{header:u,payload:p,signature:e})}return s(null,p)})};r.env.PRIVATE_KEY;const ln=r.env.PUBLIC_KEY;function decodeToken(e){return jsonwebtoken_verify(e,ln)}function extractTokenFromAuthorizationHeader(e){return e.startsWith("Bearer ")?e.slice(7):e}export{decodeToken as d,extractTokenFromAuthorizationHeader as e};
//# sourceMappingURL=session.mjs.map
